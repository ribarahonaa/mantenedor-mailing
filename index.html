<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mantenedor de Mailings - Innk</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <h1>Mantenedor de Mailings</h1>
                <p>Gestiona tus newsletters y secciones de manera profesional</p>
            </div>
            
            <div class="login-tabs">
                <button class="tab-btn active" data-tab="login">Iniciar Sesión</button>
                <button class="tab-btn" data-tab="register">Registrarse</button>
            </div>
            
            <!-- Login Form -->
            <form id="loginForm" class="login-form active">
                <div class="form-group">
                    <label for="loginUsername">Usuario</label>
                    <input type="text" id="loginUsername" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Contraseña</label>
                    <input type="password" id="loginPassword" required>
                </div>
                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
                </button>
            </form>
            
            <!-- Register Form -->
            <form id="registerForm" class="login-form">
                <div class="form-group">
                    <label for="registerUsername">Usuario</label>
                    <input type="text" id="registerUsername" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Contraseña</label>
                    <input type="password" id="registerPassword" required minlength="6">
                </div>
                <button type="submit" class="login-btn">
                    <i class="fas fa-user-plus"></i> Registrarse
                </button>
            </form>
            
            <div class="login-footer">
                <p></p>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="main-app hidden">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <h1>Mantenedor de Mailings</h1>
            </div>
            <div class="header-right">
                <span class="user-info">
                    <i class="fas fa-user"></i>
                    <span id="currentUsername">Usuario</span>
                    <span id="userRole" class="user-role">user</span>
                </span>
                <button id="logoutBtn" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
                </button>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="app-nav">
            <button class="nav-btn active" data-view="newsletters">
                <i class="fas fa-newspaper"></i> Mis Newsletters
            </button>
            <button class="nav-btn admin-only" data-view="masterSections">
                <i class="fas fa-puzzle-piece"></i> Secciones Maestras
            </button>
            <button class="nav-btn" data-view="createNewsletter">
                <i class="fas fa-plus"></i> Crear Newsletter
            </button>
        </nav>

        <!-- Main Content -->
        <main class="app-content">
            <!-- Newsletters List View -->
            <div id="newslettersView" class="content-view active">
                <div class="view-header">
                    <h2>Mis Newsletters</h2>
                    <button id="refreshNewslettersBtn" class="refresh-btn">
                        <i class="fas fa-sync-alt"></i> Actualizar
                    </button>
                </div>
                
                <div id="newslettersList" class="newsletters-list">
                    <!-- Newsletters se cargarán aquí -->
                </div>
            </div>

            <!-- Master Sections View (Admin Only) -->
            <div id="masterSectionsView" class="content-view">
                <div class="view-header">
                    <h2>Gestión de Secciones Maestras</h2>
                    <button id="addMasterSectionBtn" class="add-btn">
                        <i class="fas fa-plus"></i> Nueva Sección
                    </button>
                </div>
                
                <div id="masterSectionsList" class="master-sections-list">
                    <!-- Secciones maestras se cargarán aquí -->
                </div>
            </div>

            <!-- Create Newsletter View -->
            <div id="createNewsletterView" class="content-view">
                <div class="view-header">
                    <h2>Crear Nuevo Newsletter</h2>
                    <button id="backToNewslettersBtn" class="back-btn">
                        <i class="fas fa-arrow-left"></i> Volver
                    </button>
                </div>
                
                <div class="create-newsletter-form">
                    <div class="form-group">
                        <label for="newsletterName">Nombre del Newsletter</label>
                        <input type="text" id="newsletterName" placeholder="Ej: Newsletter Mensual" required>
                    </div>
                    <div class="form-group">
                        <label for="newsletterDescription">Descripción</label>
                        <textarea id="newsletterDescription" placeholder="Descripción del newsletter..."></textarea>
                    </div>
                    <button id="createNewsletterBtn" class="create-btn">
                        <i class="fas fa-save"></i> Crear Newsletter
                    </button>
                </div>
            </div>

            <!-- Newsletter Editor View -->
            <div id="newsletterEditorView" class="content-view">
                <div class="view-header">
                    <h2 id="editorTitle">Editor de Newsletter</h2>
                    <div class="newsletter-editor-actions">
                        <button id="saveNewsletterBtn" class="save-btn">
                            <i class="fas fa-save"></i> Guardar
                        </button>
                        <button id="previewNewsletterBtn" class="preview-btn">
                            <i class="fas fa-eye"></i> Vista Previa
                        </button>
                        <button id="copyNewsletterHtmlBtn" class="copy-btn">
                            <i class="fas fa-code"></i> Copiar HTML
                        </button>
                        <button id="backToNewslettersFromEditorBtn" class="back-btn">
                            <i class="fas fa-arrow-left"></i> Volver
                        </button>
                    </div>
                </div>
                
                <div class="newsletter-editor">
                    <div class="editor-sidebar">
                        <h3>Secciones Disponibles</h3>
                        <div id="availableSections" class="available-sections">
                            <!-- Secciones disponibles se cargarán aquí -->
                        </div>
                    </div>
                    
                    <div class="editor-main">
                        <div id="newsletterContainer" class="newsletter-container">
                            <div class="empty-state">
                                <i class="fas fa-plus-circle"></i>
                                <p>Arrastra secciones aquí para construir tu newsletter</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    
    <!-- Modal de Sección Maestra -->
    <div id="masterSectionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="masterSectionModalTitle">Nueva Sección Maestra</h2>
                <button class="modal-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="masterSectionForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="sectionName">Nombre de la Sección</label>
                            <input type="text" id="sectionName" placeholder="Ej: Encabezado Principal" required>
                        </div>
                        <div class="form-group">
                            <label for="sectionType">Tipo de Sección</label>
                            <select id="sectionType" required>
                                <option value="">Selecciona un tipo</option>
                                <option value="header">Encabezado</option>
                                <option value="content">Contenido</option>
                                <option value="image">Imagen</option>
                                <option value="button">Botón</option>
                                <option value="divider">Separador</option>
                                <option value="footer">Pie de página</option>
                                <option value="social">Redes Sociales</option>
                                <option value="gallery">Galería</option>
                                <option value="testimonial">Testimonio</option>
                                <option value="pricing">Precios</option>
                                <option value="contact">Contacto</option>
                                <option value="custom">Personalizado</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="sectionTitle">Título de la Sección</label>
                        <input type="text" id="sectionTitle" placeholder="Ej: Bienvenido a Nuestro Newsletter" required>
                        </div>
                    
                    <div class="form-group">
                        <label for="sectionContent">Contenido HTML</label>
                        <div class="code-editor-container">
                            <div class="code-editor-header">
                                <span class="language-badge">HTML</span>
                                <div class="editor-controls">
                                    <button type="button" id="formatHtmlBtn" title="Formatear HTML">
                                        <i class="fas fa-code"></i> Formatear
                                    </button>
                                    <button type="button" id="previewHtmlBtn" title="Vista previa">
                                        <i class="fas fa-eye"></i> Vista Previa
                                    </button>
                                    <button type="button" id="fullscreenBtn" title="Pantalla completa">
                                        <i class="fas fa-expand"></i>
                                    </button>
                                </div>
                            </div>
                            <textarea id="sectionContent" class="code-editor" placeholder="Escribe tu código HTML aquí..."></textarea>
                        </div>
                        <small class="form-help">Usa el editor para escribir código HTML válido. Puedes usar etiquetas como &lt;h1&gt;, &lt;p&gt;, &lt;img&gt;, etc.</small>
                    </div>
                </form>
            </div>
            
            <div class="modal-footer">
                <button type="button" id="cancelMasterSectionBtn" class="cancel-btn">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button type="button" id="saveMasterSectionBtn" class="save-btn">
                    <i class="fas fa-save"></i> Guardar
                    </button>
            </div>
        </div>
    </div>

    <!-- Section Editor Modal -->
    <div id="sectionEditorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="sectionEditorModalTitle">Editar Sección</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="sectionEditorContent">
                    <!-- El contenido del editor se generará dinámicamente -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveSectionBtn" class="save-btn">
                    <i class="fas fa-save"></i> Guardar
                </button>
                <button id="cancelSectionBtn" class="cancel-btn">
                    <i class="fas fa-times"></i> Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Notifications Container -->
    <div id="notificationsContainer" class="notifications-container"></div>

    <script src="app.js"></script>
</body>
</html> 